{
  "Finnhub": {
    "ApiKey": ""
  },
  "Telegram": {
    "BotToken": "",
    "ChatId": ""
  },
  "Mongo": {
    "ConnectionString": "",
    "Database": "TradingSignals",
    "Collections": {
      "Indicators": "Indicators",
      "TradingSignals": "TradingSignals",
      "WatchlistSymbols": "WatchlistSymbols",
      "CoreSymbols": "CoreSymbols",
      "RotationSymbols": "RotationSymbols"
    }
  },

  // ðŸ”§ CONFIGURAZIONE QUALITÃ€
  "SignalSettings": {
    "MinConfidenceLevel": 65, // ðŸ”§ Soglia qualitÃ 
    "SignalCooldownHours": 6, // ðŸ”§ Aumentato per evitare spam
    "RequireVolumeConfirmation": true, // ðŸ”§ RIATTIVATO per qualitÃ 
    "EnableEnhancedAnalysis": true,
    "MaxSignalsPerSymbolPerDay": 2 // ðŸ”§ NUOVO: Max 2 per simbolo
  },

  "Risk": {
    "DefaultStopLossPercent": 5.0,
    "DefaultTakeProfitPercent": 15.0,
    "MinRiskRewardRatio": 2.0, // ðŸ”§ RIPRISTINATO per qualitÃ 
    "UseATRForStopLoss": true,
    "ATRMultiplierLow": 2.0,
    "ATRMultiplierNormal": 2.5,
    "ATRMultiplierHigh": 3.0,
    "ATRMultiplierExtreme": 4.0
  },

  "DataDrivenTakeProfit": {
    "Enabled": true,
    "HistoricalDataDays": 60,
    "MinDataPointsRequired": 15,
    "PerformanceTrackingDays": 21,
    "MinTakeProfitPercent": 4.0,
    "MaxTakeProfitPercent": 25.0
  },

  // ðŸ”§ ANALISI QUALITÃ€
  "EnhancedAnalysis": {
    "MinConfluenceScore": 60, // ðŸ”§ Soglia qualitÃ 
    "RequireVolumeBreakout": true, // ðŸ”§ RIATTIVATO per conferma
    "MinVolumeRatio": 1.2, // ðŸ”§ Volume confermato
    "EnableTrendClassification": true,
    "EnableStructuralLevels": true,
    "EnableRSIDivergenceDetection": true,
    "EnableMACDMomentumAnalysis": true
  },

  "TechnicalAnalysis": {
    "EMA_Fast": 20,
    "EMA_Slow": 50,
    "RSI_Period": 14,
    "RSI_OversoldLevel": 30, // Mantieni standard
    "RSI_OverboughtLevel": 70, // Mantieni standard
    "MACD_Fast": 12,
    "MACD_Slow": 26,
    "MACD_Signal": 9,
    "ATR_Period": 14,
    "VolumeMA_Period": 20,
    "SwingLookback": 3
  },

  // ðŸ”§ CONFLUENCE BILANCIATO - LE SOGLIE PIÃ™ IMPORTANTI!
  "Confluence": {
    "TrendWeight": 25,
    "RSIWeight": 20,
    "MACDWeight": 20,
    "VolumeWeight": 15,
    "SupportResistanceWeight": 20,
    "MinTotalScore": 60, // ðŸ”§ Soglia qualitÃ 
    "StrongBuyThreshold": 75, // ðŸ”§ Solo i migliori
    "MediumBuyThreshold": 60, // ðŸ”§ Buona qualitÃ 
    "WarningThreshold": 50 // ðŸ”§ Solo warning estremi
  },

  "MarketTiming": {
    "PreMarketHours": 2,
    "PostMarketHours": 4,
    "WeekendAnalysisHours": 20,
    "OffHoursConfidenceBoost": 0, // ðŸ”§ Rimosso boost artificiale
    "PreMarketConfidenceBoost": 0, // ðŸ”§ Rimosso boost artificiale
    "EnableOffHoursSignals": false, // ðŸ”§ Solo durante mercato aperto
    "EnablePreMarketSignals": true, // ðŸ”§ Pre-market OK
    "QualityOverQuantity": true // ðŸ”§ NUOVO: PrioritÃ  qualitÃ 
  },

  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning",
      "Microsoft.Hosting.Lifetime": "Information",
      "PortfolioSignalWorker.Services.SimplifiedEnhancedSignalFilterService": "Information",
      "PortfolioSignalWorker.Services.SimplifiedEnhancedRiskManagementService": "Information",
      "PortfolioSignalWorker.SimplifiedEnhancedWorker": "Information"
    },
    "Console": {
      "IncludeScopes": false,
      "TimestampFormat": "[yyyy-MM-dd HH:mm:ss] "
    }
  },

  "Performance": {
    "MaxConcurrentAnalysis": 3,
    "AnalysisTimeoutSeconds": 20,
    "EnablePerformanceLogging": true
  },

  // ðŸ”§ NUOVO: Filtri Anti-Spam e QualitÃ 
  "QualityFilters": {
    "MinConfidenceForBuy": 65, // Buy signals devono essere forti
    "MinConfidenceForWarning": 55, // Warning piÃ¹ permissivi
    "MaxDailySignalsTotal": 10, // Max 10 segnali al giorno
    "MaxDailySignalsPerSymbol": 2, // Max 2 per simbolo
    "MinHoursBetweenSignals": 6, // 6 ore tra segnali stesso simbolo
    "RequireVolumeForBuy": true, // Buy deve avere volume
    "RequireTrendForStrongBuy": true, // Strong Buy deve avere trend+
    "BlockWeakTrendHighConfidence": true // Blocca segnali alta conf con trend debole
  }
}